#什么是结构体

##首先，要知道一些概念
在C语言中，关键字**struct**能定义各种类型的集合，称为结构(structure),并把它们视为一个整体。如例：
```c
struct person
{
    char name[10];
    int age;
};
```
这个例子声明了一个结构person。person不是一个变量名，而是一个新的类型，这个类型的名称通常称为结构标记符或标记符名称。**结构标记符的命名方式和变量命名方式相同
**。

结构类型定义的标准格式：
```
struct 结构体标示符
{
    数据类型 成员1的名字;
    数据类型 成员2的名字;
    ...
    数据类型 成员3的名字;
    数据类型 成员4的名字;
};
```
结构体模板只是声明了一种数据类型，定义类数据的组织形式，并未声明结构体变量，因而编译器不为其分配内存，就像编译器不会为int分配内存一样。

理论上，结构体变量所占内存空间应该等于每个成员类型所占字节数的“和”。然而并不是，事实是这样的：系统为结构体变量分配内存的大小，并不是所有成员所占内存字节数总和，它不仅与所定义的结构体类型有关，还与计算机系统本身有关。所以通常使用**sizeof**运算符计算结构体变量实际占用的内存量。

###偷天换柱的typedef
>typedef只是为一种已经存在的类型定义一个新的名称而已，并未定义一种新的类型。

有时，使用typedef为基本数据类型重新定义名称，以反映变量的含义。例如；
```c
typedef double price  //为price取新名称以表示价格
price apple;
price banana;
```

当然，上面的使用情景是有时，大多数的使用场景是为用户自定义的数据类型定义一个别名，就比如结构体。假设有一个结构用三个坐标想，用x,y,z表示一个点，代码定义：
```c
struct pts
{
    int x;
    int y;
    int z;
}

/* 用偷天换柱小能手typedef包装一下： */
typedef struct pts Point;
/*-------------------------------------------------------
这句语句指定，名称Point是struct pts的同义字。Point是类型名称。
 -------------------------------------------------------*/

/* 声明两个结构变量 */
Point start_pt;
Point end_pt; 
```

其实，往往有时候会少写一行代码，直接组合typedef和结构声明：
```c
typedef struct pts
{
    int x;
    int y;
    int z;
} Point;
```

__注意： Point不是结构变量名称，而是类型的名称。__


###访问结构成员
C语言规定，不能将一个结构体变量作为一个整体进行输入、输出操作，而只能对每个具体的成员进行输入、输出操作。

**C语言允许对具有相同结构体类型的变量进行整体赋值。**

## 结构指针

C语言规定了两种用于访问结构体成员的运算符：

1. ' . ' 圆点运算符，也称成员选择运算符
2. ' -> ' 指向运算符，也称箭头运算符。


**stu.stuID,(\*p).stuID,p->stuID这三种形式是等价的。**

### 用指针访问结构数组
如果p的初值为指向结构数组的第一个元素，则p++后即指向下一个元素的起始地址。如果p已定义为指向结构体类型的数据，则它只能指向一个结构体类型数据（即一个元素的起始地址），而不能指向一个元素中的某一成员。

## 结构与函数

```c
#include<stdio.h>

typedef struct date
{
    int year;
    int month;
    int day;
} DATE;

void modifyDate(DATE date);

int main (void)
{
    DATE oneday = {1996,8,6};

    printf("调用函数前的日期是：％d－％d－％d", oneday-year, oneday-month, oneday-day);

    modifyDate(oneday);

    printf("调用函数后的日期是：％d－％d－％d", oneday-year, oneday-month, oneday-day);

    return 0;
}

void modifyDate(DATE now)
{
    now.year = 2016; 
    now.month = 6;
    now.day = 11;
}

```

然后，运行一下，看到运行结果：

```
调用函数前的日期是：1996-8-6
调用函数后的日期是：1996-8-6
```

当结构体变量作为函数参数时，传递给函数的是实参的副本。有以下几个特点：

1. 在实参和形参之间复制整个结构体成员的内容，在函数间传递的是多个值；
2. 函数对结构体内容的修改不影响原结构体；
3. 内容传递更直观，但是系统资源开销大，特别是结构复杂时；




